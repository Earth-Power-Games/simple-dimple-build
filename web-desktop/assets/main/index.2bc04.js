window.__require=function t(e,r,o){function n(c,a){if(!r[c]){if(!e[c]){var l=c.split("/");if(l=l[l.length-1],!e[l]){var s="function"==typeof __require&&__require;if(!a&&s)return s(l,!0);if(i)return i(l,!0);throw new Error("Cannot find module '"+c+"'")}c=l}var u=r[c]={exports:{}};e[c][0].call(u.exports,function(t){return n(e[c][1][t]||t)},u,u.exports,t,e,r,o)}return r[c].exports}for(var i="function"==typeof __require&&__require,c=0;c<o.length;c++)n(o[c]);return n}({Bubble:[function(t,e,r){"use strict";cc._RF.push(e,"5bc4bEYHrBIp7IncWlfDbfS","Bubble");var o,n=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}),i=this&&this.__decorate||function(t,e,r,o){var n,i=arguments.length,c=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,r):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,r,o);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(c=(i<3?n(c):i>3?n(e,r,c):n(e,r))||c);return i>3&&c&&Object.defineProperty(e,r,c),c};Object.defineProperty(r,"__esModule",{value:!0});var c=cc._decorator,a=c.ccclass,l=(c.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.isActive=!0,e.sprite=null,e.activeSprite=null,e.inactiveSprite=null,e.activeColor="",e.inactiveColor="",e}return n(e,t),e.prototype.onLoad=function(){this.sprite=this.node.getComponent(cc.Sprite)},e.prototype.initSprites=function(t,e){this.activeSprite=t,this.inactiveSprite=e},e.prototype.initColors=function(t,e){this.activeColor=t,this.inactiveColor=e},e.prototype.changeState=function(t){this.isActive=t,this.sprite.spriteFrame=t?this.activeSprite:this.inactiveSprite,this.node.color=cc.Color.fromHEX(new cc.Color,t?this.activeColor:this.inactiveColor)},i([a],e)}(cc.Component));r.default=l,cc._RF.pop()},{}],CharacterManager:[function(t,e,r){"use strict";cc._RF.push(e,"7b4d9jjQU5MdpQ5fBCR29L2","CharacterManager");var o,n=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}),i=this&&this.__decorate||function(t,e,r,o){var n,i=arguments.length,c=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,r):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,r,o);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(c=(i<3?n(c):i>3?n(e,r,c):n(e,r))||c);return i>3&&c&&Object.defineProperty(e,r,c),c},c=this&&this.__awaiter||function(t,e,r,o){return new(r||(r=Promise))(function(n,i){function c(t){try{l(o.next(t))}catch(e){i(e)}}function a(t){try{l(o.throw(t))}catch(e){i(e)}}function l(t){var e;t.done?n(t.value):(e=t.value,e instanceof r?e:new r(function(t){t(e)})).then(c,a)}l((o=o.apply(t,e||[])).next())})},a=this&&this.__generator||function(t,e){var r,o,n,i,c={label:0,sent:function(){if(1&n[0])throw n[1];return n[1]},trys:[],ops:[]};return i={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function a(t){return function(e){return l([t,e])}}function l(i){if(r)throw new TypeError("Generator is already executing.");for(;c;)try{if(r=1,o&&(n=2&i[0]?o.return:i[0]?o.throw||((n=o.return)&&n.call(o),0):o.next)&&!(n=n.call(o,i[1])).done)return n;switch(o=0,n&&(i=[2&i[0],n.value]),i[0]){case 0:case 1:n=i;break;case 4:return c.label++,{value:i[1],done:!1};case 5:c.label++,o=i[1],i=[0];continue;case 7:i=c.ops.pop(),c.trys.pop();continue;default:if(!(n=(n=c.trys).length>0&&n[n.length-1])&&(6===i[0]||2===i[0])){c=0;continue}if(3===i[0]&&(!n||i[1]>n[0]&&i[1]<n[3])){c.label=i[1];break}if(6===i[0]&&c.label<n[1]){c.label=n[1],n=i;break}if(n&&c.label<n[2]){c.label=n[2],c.ops.push(i);break}n[2]&&c.ops.pop(),c.trys.pop();continue}i=e.call(t,c)}catch(a){i=[6,a],o=0}finally{r=n=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}},l=this&&this.__spreadArrays||function(){for(var t=0,e=0,r=arguments.length;e<r;e++)t+=arguments[e].length;var o=Array(t),n=0;for(e=0;e<r;e++)for(var i=arguments[e],c=0,a=i.length;c<a;c++,n++)o[n]=i[c];return o};Object.defineProperty(r,"__esModule",{value:!0});var s=cc._decorator,u=s.ccclass,p=s.property,f=t("./Character"),h=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.mainCharacter=null,e.characters=null,e.bosses=null,e.currentIndex=0,e.characterIndex=0,e}return n(e,t),e.prototype.onEnable=function(){this.mainCharacter.node.on("BUBBLES_END",this.onBubblesEnd,this)},e.prototype.onDisable=function(){this.mainCharacter.node.off("BUBBLES_END",this.onBubblesEnd,this)},e.prototype.start=function(){this.loadData()},e.prototype.onBubblesEnd=function(){++this.currentIndex%5==0?this.mainCharacter.init(this.getNextBoss()):(this.characterIndex=(this.characterIndex+1)%this.characters.length,this.mainCharacter.init(this.getNextCharacter()))},e.prototype.loadData=function(){return c(this,void 0,void 0,function(){var t,e;return a(this,function(r){switch(r.label){case 0:return t=this,[4,this.loadConfigs("config/characters")];case 1:return t.characters=r.sent(),e=this,[4,this.loadConfigs("config/bosses")];case 2:return e.bosses=r.sent(),this.onBubblesEnd(),[2]}})})},e.prototype.getNextCharacter=function(){return this.characters[this.characterIndex].json},e.prototype.getNextBoss=function(){return this.bosses[0].json},e.prototype.loadConfigs=function(t){return new Promise(function(e,r){cc.resources.loadDir(t,function(t,o){t&&r(t),e(o)})})},e.prototype.shuffleArray=function(t){for(var e=l(t),r=e.length-1;r>0;r--){var o=Math.floor(Math.random()*(r+1)),n=e[r];e[r]=e[o],e[o]=n}return e},i([p(f.default)],e.prototype,"mainCharacter",void 0),i([u],e)}(cc.Component);r.default=h,cc._RF.pop()},{"./Character":"Character"}],Character:[function(t,e,r){"use strict";cc._RF.push(e,"68f81Dyc1BGopymCVBYvpfG","Character");var o,n=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}),i=this&&this.__decorate||function(t,e,r,o){var n,i=arguments.length,c=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,r):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,r,o);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(c=(i<3?n(c):i>3?n(e,r,c):n(e,r))||c);return i>3&&c&&Object.defineProperty(e,r,c),c};Object.defineProperty(r,"__esModule",{value:!0});var c=cc._decorator,a=c.ccclass,l=c.property,s=t("./Bubble"),u=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.bubblePrefab=null,e.label=null,e.audioSource=null,e.clickAudioClip=null,e.sprite=null,e.bubblesParent=null,e.activeSprite=null,e.inactiveSprite=null,e.clickedAmount=0,e.amount=0,e.rect=null,e}return n(e,t),e.prototype.onLoad=function(){var t=new cc.Vec2(this.sprite.node.width,this.sprite.node.height);t.mulSelf(.5),this.rect={t:t.y,b:-t.y,l:-t.x,r:t.x},this.audioSource.clip=this.clickAudioClip},e.prototype.updateLabel=function(){this.label.string=this.clickedAmount+"/"+this.amount},e.prototype.onBubbleClick=function(t){t.isActive&&(t.changeState(!1),this.clickedAmount++,this.updateLabel(),this.audioSource.play(),this.clickedAmount==this.amount&&this.node.emit("BUBBLES_END"))},e.prototype.init=function(t){var e=this;this.initBubbles(t.bubbles,t.colorActive,t.colorInactive),cc.loader.loadRes(t.sprite,cc.SpriteFrame,function(t,r){e.sprite.spriteFrame=r}),this.clickedAmount=0,this.amount=this.bubblesParent.children.length,this.updateLabel(),console.log(t.sprite)},e.prototype.initBubbles=function(t,e,r){var o=this;this.bubblesParent.removeAllChildren(),t.forEach(function(t){var n=cc.instantiate(o.bubblePrefab);n.on(cc.Node.EventType.TOUCH_START,function(){return o.onBubbleClick(i)},o),n.parent=o.bubblesParent,n.position=o.convertPosition(t);var i=n.getComponent(s.default);i.initSprites(o.activeSprite,o.inactiveSprite),i.initColors(e,r),i.changeState(!0)})},e.prototype.convertPosition=function(t){var e=t.x,r=t.y;return e=cc.misc.lerp(this.rect.l,this.rect.r,e),r=cc.misc.lerp(this.rect.b,this.rect.t,r),new cc.Vec3(e,r,0)},e.prototype.resetBubbles=function(){this.bubblesParent.children.forEach(function(t){t.getComponent(s.default).changeState(!0)}),this.clickedAmount=0,this.updateLabel()},i([l(cc.Prefab)],e.prototype,"bubblePrefab",void 0),i([l(cc.Label)],e.prototype,"label",void 0),i([l(cc.AudioSource)],e.prototype,"audioSource",void 0),i([l(cc.AudioClip)],e.prototype,"clickAudioClip",void 0),i([l(cc.Sprite)],e.prototype,"sprite",void 0),i([l(cc.Node)],e.prototype,"bubblesParent",void 0),i([l(cc.SpriteFrame)],e.prototype,"activeSprite",void 0),i([l(cc.SpriteFrame)],e.prototype,"inactiveSprite",void 0),i([a],e)}(cc.Component);r.default=u,cc._RF.pop()},{"./Bubble":"Bubble"}],Helloworld:[function(t,e,r){"use strict";cc._RF.push(e,"e1b90/rohdEk4SdmmEZANaD","Helloworld");var o,n=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}),i=this&&this.__decorate||function(t,e,r,o){var n,i=arguments.length,c=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,r):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,r,o);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(c=(i<3?n(c):i>3?n(e,r,c):n(e,r))||c);return i>3&&c&&Object.defineProperty(e,r,c),c};Object.defineProperty(r,"__esModule",{value:!0});var c=cc._decorator,a=c.ccclass,l=c.property,s=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.label=null,e.text="hello",e}return n(e,t),e.prototype.start=function(){this.label.string=this.text},i([l(cc.Label)],e.prototype,"label",void 0),i([l],e.prototype,"text",void 0),i([a],e)}(cc.Component);r.default=s,cc._RF.pop()},{}]},{},["Bubble","Character","CharacterManager","Helloworld"]);